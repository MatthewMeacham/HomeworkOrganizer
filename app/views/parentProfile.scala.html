@(parent: Parent, students: List[Student], overview: List[Assignment], today: Integer, startingBlock: String, errorMessage: String)

@import helper._
@import models._
@import play.api.data.Forms._
@import util.control.Breaks._

<!DOCTYPE html>
<html>

	<head>
		<title>Orgnizr |  @parent.name's Profile</title>
		
		<!-- STYLESHEETS -->
		<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/animate.css")">
		<link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/font.css")">
        <link rel="stylesheet" media="screen" href="@routes.Assets.at("stylesheets/profile.css")">
		
		<!-- DEPENDENCIES -->
		<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css" rel="stylesheet">

        <!-- META TAGS (FOR BROWSER INDEXING) -->
        <meta http-equiv="content-type" content="text/html; charset=utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="description" content="Welcome to your profile, here you can track your homework and it's progress!">
        <meta name="keywords" content="Orgnizr, organizer, homework, project, high, school, test, quiz">

        <!-- OG TAGS (FOR FACEBOOK | G+ | TWITTER LINKS) -->
        <meta property="og:title" content="Orgnizr" />
        <meta property="og:type"   content="website" />
        <meta property="og:image" content="@routes.Assets.at("images/og-logo.png")" />
        <meta property="og:description" content="Welcome to your profile, here you can track your homework and it's progress!" />
        <meta property="og:locale" content="en_US" />


        <!-- APPLE ICONS (FOR APPLE DEVICES) -->
        <link rel="apple-touch-icon" href="@routes.Assets.at("images/touch-icon-iphone.png")">
        <link rel="apple-touch-icon" sizes="76x76" href="@routes.Assets.at("images/touch-icon-ipad.png")">
        <link rel="apple-touch-icon" sizes="120x120" href="@routes.Assets.at("images/touch-icon-iphone-retina.png")">
        <link rel="apple-touch-icon" sizes="152x152" href="@routes.Assets.at("images/touch-icon-ipad-retina.png")">

        <!-- BROWSER ICON -->
        <link rel="icon" type="image/png" href="@routes.Assets.at("images/favicon.png")" sizes="32x32">

        <!-- SCRIPTS -->
        <script src="@routes.Assets.at("./javascripts/jquery-1.9.0.min.js")" type="text/javascript"></script>
        <script>
			$(function() {
				var pull 		= $('#pull');
					menu 		= $('nav ul');
					menuHeight	= menu.height();

				$(pull).on('click', function(e) {
					e.preventDefault();
					menu.slideToggle();
				});

				$(window).resize(function(){
		    		var w = $(window).width();
		    		if(w > 320 && menu.is(':hidden')) {
		    			menu.removeAttr('style');
		    		}
				});
			});
        </script>
	    <script>
			function submitAssignmentDeleteForm(id) {
				document.getElementById('assignmentDeleteForm' + id).submit();
			}
		</script>
		<script>
			function submitAssignmentEditForm(id) {
				document.getElementById('assignmentEditForm' + id).submit();
			}
		</script>
		<script>
			var changeRoute = function() {
				var frm = document.getElementById('accountSettingsForm');
				var dropDown = document.getElementById('ids');
				var selectedValue = dropDown.options[dropDown.selectedIndex].value;
				@defining(new ArrayList[String]()) {arr => 
				@{	
					arr.add(parent.email.split("@")(0)) 
					arr.add(parent.email.split("@")(1))
				}
				frm.action = 
					"/parentProfileSettingsChanged/?parentID=" +
					"@arr(0)" +
					"%40" +
					"@arr(1)" +
					"&studentID=" + 
					selectedValue;
				frm.submit();
				}
			}
		</script>
	</head>
	<body>
		<div id="topSection">
			<div class="topImage">
				<img src=@routes.Assets.at("images/logo.png") alt="Orgnizr">
			</div>
			
			<script>
				function toggle_visibility(id) {
					var e = document.getElementById(id);
					document.getElementById('overview').style.display = 'none';		
					document.getElementById('addChild').style.display = 'none';
					document.getElementById('accountSettings').style.display = 'none';
					e.style.display = 'block';
				}
			</script>

			<div class="topNav">
				<nav class="clearfix" id="top">
					<ul class="clearfix">
						<li><a href="#" onclick="toggle_visibility('overview')"><div id="overviewToggle" style="display: inline-block;">Overview</div></a></li>
						@for(student <- students) {
							<li><a href="@routes.Application.redirectToStudent(student.id, parent.email)" target="_blank"><div style="display: inline-block;">@student.name</div></a></li>
						}
						<li><a href="#" onclick="toggle_visibility('addChild')"><div id="addChildToggle" style="display: inline-block;">Add Child</div></a></li>
						<div id="browser">
							<li>|</li>
						</div>
						<div id="mobile">
							<li><hr/></li>
						</div>
						<li id="afterNav"><a href="#" onclick="toggle_visibility('accountSettings')"><div id="accountSettingsToggle" style="display: inline-block;">@parent.name</div></a></li>
						<li id="afterNav"><a href="@routes.Application.logout()">Log Out</a></li>
					</ul>
					<a href="#" id="pull"></a>
				</nav>
			</div>
		</div>
	
		<!-- ENWRAPS ALL CONTENT -->
		<div class="contentContainer">
			<div id="main">
				
				
				<!-- BEGIN OVERVIEW -->
				<div id="overview" style="display: block; width: 100vw; margin-left: -10px; margin-right: 10px;">
					<div class="area center" style=" width: 100vw; margin-left: -10px; margin-right: 10px;">
						<h2 style="text-align: center;">Overview</h2>
						@if(students.length > 0) {
							@for(assignment <- overview) {
								<div class="itemBigContainer">
									@if(assignment.total > today + 5) {
									<div class="green">
									} else {
										@if(assignment.total <= today + 5 && assignment.total > today + 1){
										<div class="yellow">
										} else {
										<div class="red">
										}
									}
										<span class="alertBig">
											@assignment.spanner
										</span>
										<div class="contentInside">  
											@form(action = routes.Application.deleteAssignment(String.valueOf(assignment.id), String.valueOf(assignment.schoolClass.student.id)), 'id -> ("assignmentDeleteForm" + String.valueOf(assignment.id))) {
												<a href="#" onclick="submitAssignmentDeleteForm(@assignment.id); return false;">
													<i class="fa fa-trash myIcon"></i>
												</a>
											}
		
											@form(action = routes.Application.editPageAssignment(String.valueOf(assignment.id), String.valueOf(assignment.schoolClass.student.id)), 'id -> ("assignmentEditForm" + String.valueOf(assignment.id))) {
												<a href="#" onclick="submitAssignmentEditForm(@assignment.id); return false;">
													<i class="fa fa-pencil myIcon"></i>
												</a>
											}
											<p class="itemHeaderBig">@assignment.schoolClass.subject</p>
											<p class="itemDueDateBig"> @assignment.dueDate</p>
											<p class="itemDescBig"> @assignment.description </p>
										</div>
									</div>
								</div>
							}
						} else {
							<div style="text-align: center;">
								<h3> You don't have any children added yet. Once you add some, they will all appear here. </h3>
							</div>
						}
					</div>
				</div>
				<!-- END OVERVIEW -->
				
								
				
				<!-- BEGIN ADD CHILD -->
				<div id="addChild" style="display: none; width: 100vw; margin-left: -10px; margin-right: 10px;">
					<div class="area center" style=" width: 100vw; margin-left: -10px; margin-right: 10px;">
						<h2 style="text-align: center;">Add Child</h2>
							@form(action = routes.Application.addChild()) {
								<div style="text-align: center; margin-left: auto; margin-right: auto;">
									<h3> Name Of Child: </h3>
									<input type="text" name="name" placeholder="Name" required/><br/>
									<input type="hidden" name="email" value="@parent.email">
									<h3> Password for your Child's account, they will use this and your email to log in.</h3>
									<input type="password" name="password" placeholder="Password" required><br/>
									<h3> Child's grade</h3>
									<input type="number" placeholder="Grade" name="grade" min="1" max="12" required> <br/>
									<button type="submit" value="Add Child">Add Child</button>
								</div>
							}
					</div>
				</div>
				<!--  END ADD CHILD -->
				
				
				<!-- BEGIN ACCOUNT SETTINGS -->
				<div id="accountSettings" style="display: none;">
					<div class="area center" style="text-align: center;"> 
						<h2 style="text-algin: center;"> Account Settings</h2>
				 		@form(action = routes.Application.changeParentAccountSettings(parent.email, "0"), 'id -> "accountSettingsForm", 'onsubmit -> "return changeRoute();") {
							<div class="changeSettings section group">
								<div class="col span_1_of_4">
									<label>Choose Person</label> <br>
									<select id="ids">
										<option value=@parent.email> @parent.name </option>
										@for(child <- students) {
											<option value=@child.id> @child.name </option>
										}
									</select>
								</div>
								<div class="col span_1_of_4">
									<label>Change Email</label> <br>
									<input type="text" name="email" value="@parent.email">
								</div>
								<div class="col span_1_of_4">
									<label>Change Password</label> <br>
									<input type="password" name="currentPassword" placeholder="Enter Current Password">
									<input type="password" name="newPassword" placeholder="Enter New Password">
									<input type="password" name="newPasswordAgain" placeholder="Enter New Password Again">
									
								</div>
								<div class="col span_1_of_4">
									<label>Change Name</label> <br>
									<input type="text" name="name" value="@parent.name">
								</div>									
									
								
							</div>
							<br><br><br><br><br>
							<div class="btn">
								<button class="saveChanges"> Save Changes </button>
							</div>
						}
					</div>
				</div>
				
				<!-- END ACCOUNT SETTINGS -->
			
				
			</div>
		</div>
	</body>
	
	
	
	<!-- BEGIN SCRIPTS -->
	<script>
		function combine(id, category) {
			console.log("year" + category);
			var element = document.getElementById(id);
			var year = document.getElementById('year' + category).options[document.getElementById('year' + category).selectedIndex].value;
			var month = document.getElementById('month' + category).options[document.getElementById('month' + category).selectedIndex].value;
			var day = document.getElementById('days' + category).options[document.getElementById('days' + category).selectedIndex].value;
			console.log(year + "-" + month + "-" + day);
			element.value = year + "-" + month + "-" + day;
		}
	</script>
	
	<script>
			function removeOptions(selectbox) {
				var i;
				for(i=selectbox.options.length-1;i>=0;i--) {
					selectbox.remove(i);
				}
			}
			
			function changeDaysLeapYear(year, category) {
				if(document.getElementById('month' + category).options[document.getElementById('month' + category).selectedIndex].value == 02) {
					removeOptions(document.getElementById('days' + category));
					if(Number(document.getElementById('year' + category).options[document.getElementById('year' + category).selectedIndex].value) % 4 == 0) {
						for(i = 1; i < 30; i++) {
								var option = document.createElement("option");
								option.text = i;
								if(i < 10) {
									i = "0" + i;
								}
								option.value = i;
								document.getElementById('days' + category).add(option);
							}
					} else {
						for(i = 1; i < 29; i++) {
							var option = document.createElement("option");
							option.text = i;
							if(i < 10) {
								i = "0" + i;
							}
							option.value = i;
							document.getElementById('days' + category).add(option);
						}
					}
				}
			}

			function changeDays(month, category) {
				var sel = document.getElementById('days' + category);
				removeOptions(sel);
				var opts = sel.options;
				switch(month) {
					case 'January':
					case 'March':
					case 'May':
					case 'July':
					case 'August':
					case 'October':
					case 'December':
						for(i = 1; i < 32; i++) {
							var option = document.createElement("option");
							option.text = i;
							if(i < 10) {
								i = "0" + i;
							}
							option.value = i;
							sel.add(option);
						}
					break;
					case 'April':
					case 'June':
					case 'September':
					case 'November':
						for(i = 1; i < 31; i++) {
							var option = document.createElement("option");
							option.text = i;
							if(i < 10) {
								i = "0" + i;
							}
							option.value = i;
							sel.add(option);
						}
					break;
					case 'February':
						var years = document.getElementById('year' + category);
						var yearOptions = years.options;
						if(Number(yearOptions[years.selectedIndex].text) % 4 == 0) {
							for(i = 1; i < 30; i++) {
								var option = document.createElement("option");
								option.text = i;
								if(i < 10) {
									i = "0" + i;
								}
								option.value = i;
								sel.add(option);
							}
						} else {
							for(i = 1; i < 29; i++) {
								var option = document.createElement("option");
								option.text = i;
								if(i < 10) {
									i = "0" + i;
								}
								option.value = i;
								sel.add(option);
							}
						}
						
						
					break;
				}
			}
		</script>
	
	<!-- END SCRIPTS -->
	
	
	
</html>